<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SusuPay - Admin Dashboard</title>
    <link rel="stylesheet" href="admin-dashboard.css">
</head>
<body>
    <div class="admin-container">
        <!-- Admin Header -->
        <div class="admin-header">
            <div>
                <h1>
                    üè¶ SusuPay Admin
                    <span class="admin-badge">ADMIN PANEL</span>
                </h1>
                <p style="color: #718096; margin-top: 10px;">Comprehensive platform management and user oversight</p>
            </div>
            <div class="admin-nav">
                <button class="nav-item active" data-section="dashboard">
                    üìä Dashboard
                </button>
                <button class="nav-item" data-section="users">
                    üë• Users
                </button>
                <button class="nav-item" data-section="kyc">
                    üõ°Ô∏è KYC Review
                </button>
                <button class="nav-item" data-section="approvals">
                    ‚è≥ Approvals
                </button>
                <button class="nav-item" data-section="transactions">
                    üí∞ Transactions
                </button>
                <button class="nav-item" data-section="reports">
                    üìà Reports
                </button>
                <button class="logout-btn" id="admin-logout">
                    üö™ Logout
                </button>
            </div>
        </div>

        <!-- Alert Container -->
        <div id="alert-container"></div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon users">üë•</div>
                <div class="stat-content">
                    <h3 id="total-users">0</h3>
                    <p>Total Users</p>
                    <div class="stat-change positive" id="users-change">+0 this month</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon kyc">üõ°Ô∏è</div>
                <div class="stat-content">
                    <h3 id="pending-kyc">0</h3>
                    <p>Pending KYC</p>
                    <div class="stat-change" id="kyc-change">Awaiting review</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon transactions">üí∞</div>
                <div class="stat-content">
                    <h3 id="total-transactions">‚Çµ0</h3>
                    <p>Total Volume</p>
                    <div class="stat-change positive" id="volume-change">+‚Çµ0 today</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon revenue">üìà</div>
                <div class="stat-content">
                    <h3 id="platform-revenue">‚Çµ0</h3>
                    <p>Platform Revenue</p>
                    <div class="stat-change positive" id="revenue-change">+‚Çµ0 this month</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <div class="section" id="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">
                        üìä Platform Overview
                    </h2>
                    <button class="btn" onclick="refreshDashboard()">
                        üîÑ Refresh Data
                    </button>
                </div>

                <div class="tabs">
                    <button class="tab active" data-tab="recent-activity">Recent Activity</button>
                    <button class="tab" data-tab="analytics">Analytics</button>
                    <button class="tab" data-tab="system-health">System Health</button>
                </div>

                <div class="tab-content active" id="recent-activity">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>User</th>
                                    <th>Action</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="recent-activity-table">
                                <tr>
                                    <td colspan="5" class="empty-state">
                                        <div class="empty-state-icon">üìã</div>
                                        <p>No recent activity to display</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-content" id="analytics">
                    <div class="chart-container">
                        <div>üìä Analytics charts will be displayed here</div>
                    </div>
                </div>

                <div class="tab-content" id="system-health">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div style="padding: 20px; background: #f0fff4; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #38a169; margin-bottom: 10px;">‚úÖ</div>
                            <div style="font-weight: 600; color: #22543d;">Database</div>
                            <div style="color: #68d391; font-size: 0.9rem;">Operational</div>
                        </div>
                        <div style="padding: 20px; background: #f0fff4; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #38a169; margin-bottom: 10px;">‚úÖ</div>
                            <div style="font-weight: 600; color: #22543d;">Authentication</div>
                            <div style="color: #68d391; font-size: 0.9rem;">Operational</div>
                        </div>
                        <div style="padding: 20px; background: #f0fff4; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #38a169; margin-bottom: 10px;">‚úÖ</div>
                            <div style="font-weight: 600; color: #22543d;">File Storage</div>
                            <div style="color: #68d391; font-size: 0.9rem;">Operational</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Section -->
            <div class="section" id="users-section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        üë• User Management
                    </h2>
                    <button class="btn" onclick="exportUsers()">
                        üì• Export Users
                    </button>
                </div>

                <div class="search-filter">
                    <input type="text" class="search-input" id="user-search" placeholder="Search users by name, email, or phone...">
                    <select class="filter-select" id="user-status-filter">
                        <option value="">All Statuses</option>
                        <option value="verified">Email Verified</option>
                        <option value="unverified">Email Unverified</option>
                    </select>
                    <select class="filter-select" id="kyc-status-filter">
                        <option value="">All KYC Status</option>
                        <option value="not_started">Not Started</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>

                <div class="loading" id="users-loading">
                    <div class="spinner"></div>
                    <p>Loading users...</p>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Country</th>
                                <th>Phone</th>
                                <th>Balance</th>
                                <th>KYC Status</th>
                                <th>Email Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table">
                            <!-- Users will be populated here -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="users-pagination">
                    <!-- Pagination will be populated here -->
                </div>
            </div>

            <!-- KYC Review Section -->
            <div class="section" id="kyc-section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        üõ°Ô∏è KYC Verification Review
                    </h2>
                    <div style="display: flex; gap: 10px;">
                        <select class="filter-select" id="kyc-filter">
                            <option value="pending">Pending Review</option>
                            <option value="all">All Submissions</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                        </select>
                        <button class="btn" onclick="refreshKYC()">
                            üîÑ Refresh
                        </button>
                    </div>
                </div>

                <div class="loading" id="kyc-loading">
                    <div class="spinner"></div>
                    <p>Loading KYC submissions...</p>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Submitted</th>
                                <th>Documents</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="kyc-table">
                            <!-- KYC submissions will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Transactions Section -->
            <div class="section" id="transactions-section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        üí∞ Transaction Monitor
                    </h2>
                    <div style="display: flex; gap: 10px;">
                        <select class="filter-select" id="transaction-type-filter">
                            <option value="">All Types</option>
                            <option value="contribution">Contributions</option>
                            <option value="withdrawal">Withdrawals</option>
                        </select>
                        <button class="btn" onclick="exportTransactions()">
                            üì• Export
                        </button>
                    </div>
                </div>

                <div class="search-filter">
                    <input type="text" class="search-input" id="transaction-search" placeholder="Search by user or transaction ID...">
                    <input type="date" class="filter-select" id="date-from" style="width: auto;">
                    <input type="date" class="filter-select" id="date-to" style="width: auto;">
                </div>

                <div class="loading" id="transactions-loading">
                    <div class="spinner"></div>
                    <p>Loading transactions...</p>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>User</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Commission</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-table">
                            <!-- Transactions will be populated here -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="transactions-pagination">
                    <!-- Pagination will be populated here -->
                </div>
            </div>

            <!-- Reports Section -->
            <div class="section" id="reports-section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        üìà Reports & Analytics
                    </h2>
                    <button class="btn" onclick="generateReports()">
                        üìä Generate Report
                    </button>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 30px;">
                    <div style="padding: 25px; border: 2px solid #e2e8f0; border-radius: 15px;">
                        <h3 style="color: #4a5568; margin-bottom: 15px;">üìä User Growth</h3>
                        <div class="chart-container" style="height: 200px;">
                            User growth chart placeholder
                        </div>
                    </div>
                    <div style="padding: 25px; border: 2px solid #e2e8f0; border-radius: 15px;">
                        <h3 style="color: #4a5568; margin-bottom: 15px;">üí∞ Revenue Trends</h3>
                        <div class="chart-container" style="height: 200px;">
                            Revenue trends chart placeholder
                        </div>
                    </div>
                    <div style="padding: 25px; border: 2px solid #e2e8f0; border-radius: 15px;">
                        <h3 style="color: #4a5568; margin-bottom: 15px;">üõ°Ô∏è KYC Completion</h3>
                        <div class="chart-container" style="height: 200px;">
                            KYC completion chart placeholder
                        </div>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" data-tab="daily-report">Daily Report</button>
                    <button class="tab" data-tab="monthly-report">Monthly Report</button>
                    <button class="tab" data-tab="custom-report">Custom Report</button>
                </div>

                <div class="tab-content active" id="daily-report">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="padding: 20px; background: #f7fafc; border-radius: 10px;">
                            <h4 style="color: #4a5568; margin-bottom: 10px;">Today's Registrations
                            <div style="font-size: 2rem; font-weight: 700; color: #667eea;" id="today-registrations">0</div>
                        </div>
                        <div style="padding: 20px; background: #f7fafc; border-radius: 10px;">
                            <h4 style="color: #4a5568; margin-bottom: 10px;">Today's Transactions</h4>
                            <div style="font-size: 2rem; font-weight: 700; color: #48bb78;" id="today-transactions">‚Çµ0</div>
                        </div>
                        <div style="padding: 20px; background: #f7fafc; border-radius: 10px;">
                            <h4 style="color: #4a5568; margin-bottom: 10px;">KYC Submissions</h4>
                            <div style="font-size: 2rem; font-weight: 700; color: #f093fb;" id="today-kyc">0</div>
                        </div>
                        <div style="padding: 20px; background: #f7fafc; border-radius: 10px;">
                            <h4 style="color: #4a5568; margin-bottom: 10px;">Platform Revenue</h4>
                            <div style="font-size: 2rem; font-weight: 700; color: #ed8936;" id="today-revenue">‚Çµ0</div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="monthly-report">
                    <div class="chart-container">
                        <div>üìä Monthly analytics charts will be displayed here</div>
                    </div>
                </div>

                <div class="tab-content" id="custom-report">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #4a5568;">Report Type</label>
                            <select class="filter-select" id="custom-report-type" style="width: 100%;">
                                <option value="users">User Activity Report</option>
                                <option value="transactions">Transaction Analysis</option>
                                <option value="kyc">KYC Performance</option>
                                <option value="revenue">Revenue Analysis</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #4a5568;">Date Range</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="date" class="filter-select" id="custom-date-from" style="flex: 1;">
                                <input type="date" class="filter-select" id="custom-date-to" style="flex: 1;">
                            </div>
                        </div>
                    </div>
                    <button class="btn" onclick="generateCustomReport()">
                        üìä Generate Custom Report
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- KYC Review Modal -->
    <div class="modal" id="kyc-review-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeKYCReviewModal()">&times;</button>
            
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="color: #4a5568; font-size: 1.8rem; font-weight: 700; margin-bottom: 10px;">
                    üõ°Ô∏è KYC Document Review
                </h2>
                <p style="color: #718096;" id="kyc-user-info">Review KYC submission for user verification</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-bottom: 30px;">
                <div>
                    <h3 style="color: #4a5568; margin-bottom: 15px; text-align: center;">üìÑ Front ID</h3>
                    <div class="document-preview">
                        <img id="front-id-preview" class="document-image" alt="Front ID" src="">
                    </div>
                </div>
                <div>
                    <h3 style="color: #4a5568; margin-bottom: 15px; text-align: center;">üìÑ Back ID</h3>
                    <div class="document-preview">
                        <img id="back-id-preview" class="document-image" alt="Back ID" src="">
                    </div>
                </div>
                <div>
                    <h3 style="color: #4a5568; margin-bottom: 15px; text-align: center;">üì∏ Selfie</h3>
                    <div class="document-preview">
                        <img id="selfie-preview" class="document-image" alt="Selfie" src="">
                    </div>
                </div>
            </div>

            <div style="background: #f7fafc; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                <h4 style="color: #4a5568; margin-bottom: 15px;">üìù Review Notes</h4>
                <textarea id="review-notes" placeholder="Add your review notes here..." style="width: 100%; height: 100px; padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: inherit; resize: vertical;"></textarea>
            </div>

            <div style="display: flex; gap: 15px; justify-content: center;">
                <button class="btn btn-approve" onclick="approveKYC()">
                    ‚úÖ Approve KYC
                </button>
                <button class="btn btn-reject" onclick="rejectKYC()">
                    ‚ùå Reject KYC
                </button>
                <button class="btn" onclick="closeKYCReviewModal()" style="background: #718096;">
                    üìã Review Later
                </button>
            </div>
        </div>
    </div>

    <!-- User Details Modal -->
    <div class="modal" id="user-details-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeUserDetailsModal()">&times;</button>
            
            <div style="text-align: center; margin-bottom: 30px;">
                <div id="user-modal-avatar" class="user-avatar" style="width: 80px; height: 80px; font-size: 2rem; margin: 0 auto 15px;"></div>
                <h2 style="color: #4a5568; font-size: 1.8rem; font-weight: 700; margin-bottom: 5px;" id="user-modal-name">User Name</h2>
                <p style="color: #718096;" id="user-modal-email">user@example.com</p>
            </div>

            <div class="tabs">
                <button class="tab active" data-tab="user-profile">üë§ Profile</button>
                <button class="tab" data-tab="user-transactions">üí∞ Transactions</button>
                <button class="tab" data-tab="user-activity">üìä Activity</button>
            </div>

            <div class="tab-content active" id="user-profile">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">Phone</label>
                        <p id="user-modal-phone" style="color: #2d3748;">-</p>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">Country</label>
                        <p id="user-modal-country" style="color: #2d3748;">-</p>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">Balance</label>
                        <p id="user-modal-balance" style="color: #2d3748;">‚Çµ0</p>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">Daily Rate</label>
                        <p id="user-modal-rate" style="color: #2d3748;">‚Çµ0</p>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">KYC Status</label>
                        <span id="user-modal-kyc" class="status-badge">-</span>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">Member Since</label>
                        <p id="user-modal-created" style="color: #2d3748;">-</p>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="user-transactions">
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody id="user-transactions-table">
                            <!-- User transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-content" id="user-activity">
                <div class="chart-container">
                    <div>üìä User activity charts will be displayed here</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK and JavaScript -->
    <script type="module" src="admin-dashboard.js">
       
    </script>
</body>
